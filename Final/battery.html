<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ä½ç½®èˆ‡é›»é‡å›å ±</title>

<style>
body {
  font-family: "Microsoft JhengHei", sans-serif;
  background: #f4f6f8;
  text-align: center;
  padding-top: 40px;
}
.box {
  background: white;
  width: 360px;
  margin: auto;
  padding: 20px;
  border-radius: 10px;
}
button {
  padding: 8px 14px;
  border: none;
  border-radius: 6px;
  background: #007bff;
  color: white;
  cursor: pointer;
}
pre {
  background: #eee;
  padding: 10px;
  border-radius: 6px;
  text-align: left;
  white-space: pre-wrap;
}
</style>
</head>

<body>

<div class="box">
  <h3>ğŸ“± ä½ç½®èˆ‡é›»é‡å›å ±</h3>

  <button onclick="getInfo()">å–å¾—è³‡è¨Š</button>
  <button onclick="copyText()">è¤‡è£½å›å ±æ–‡å­—</button>

  <pre id="output">å°šæœªå–å¾—è³‡æ–™</pre>
</div>

<script>
let shareText = "";

function getInfo() {

  if (!navigator.geolocation) {
    document.getElementById("output").textContent =
      "æ­¤ç€è¦½å™¨ä¸æ”¯æ´å®šä½åŠŸèƒ½";
    return;
  }

  navigator.geolocation.getCurrentPosition(
    function (pos) {
      const lat = pos.coords.latitude;
      const lon = pos.coords.longitude;
      const mapUrl = "https://www.google.com/maps?q=" + lat + "," + lon;

      if (navigator.getBattery) {
        navigator.getBattery().then(function (battery) {
          const percent = Math.round(battery.level * 100);
          makeText(mapUrl, percent);
        });
      } else {
        makeText(mapUrl, "æœªçŸ¥");
      }
    },
    function () {
      document.getElementById("output").textContent = "ç„¡æ³•å–å¾—ä½ç½®";
    }
  );
}


function makeText(mapUrl, battery) {
  let note = "";

  if (battery >= 50) {
    note = "é›»é‡å……è¶³ï¼Œå¯ä»¥ä¿æŒè¯çµ¡";
  } else if (battery >= 20) {
    note = "é›»é‡ç¨ä½ï¼Œä»å¯æ­£å¸¸é€šè¨Š";
  } else {
    note = "é›»é‡ç„¦æ…®äº†ï¼Œä½†æˆ‘äººå¾ˆå®‰å…¨ï¼Œä¸ç”¨æ“”å¿ƒ";
  }

  shareText =
    "ğŸ“ æˆ‘ç›®å‰çš„ä½ç½®ï¼š\n" +
    mapUrl + "\n\n" +
    "ğŸ”‹ é›»é‡å‰©é¤˜ï¼š" + battery + "%\n" +
    "å‚™è¨»ï¼š" + note;

  document.getElementById("output").textContent = shareText;
}

function copyText() {
  if (!shareText) {
    alert("è«‹å…ˆå–å¾—è³‡è¨Š");
    return;
  }
  navigator.clipboard.writeText(shareText);
  alert("å·²è¤‡è£½ï¼Œå¯è²¼åˆ° LINE");
}
</script>

</body>
</html>
